:-module(final_test, [background_knowledge/2
	  ,metarules/2
	  ,positive_example/2
	  ,negative_example/2
    ]).

:-set_prolog_flag(stack_limit, 2_147_483_648).

background_knowledge(test/2,[identityt/2,onet/2,lastt/2,reverset/2,firstt/2,zerot/2,emptyt/2,secondt/2,flipt/2,firstzerot/1,firstonet/1]).
%background_knowledge(test/2,[firstt/2,onet/2,lastt/2,zerot/2]).
%metarules(test/2,[chain,identity,inverse,tailrec,switch,swap]).
metarules(test/2,[identity, chain, precon]).

positive_example(test/2,test([0,1,0],[1])).
positive_example(test/2,test([0,1],[1])).

negative_example(test/2,test([0,1,0],[0,1])).
negative_example(test/2,test([0,1,0],[1,0])).
negative_example(test/2,test([0,1],[0])).
negative_example(test/2,test([0,1],[1,0])).






identityt(X,X).

reverset(Xs, Ys) :-
    reverset(Xs, [], Ys, Ys).

reverset([], Ys, Ys, []).
reverset([X|Xs], Rs, Ys, [_|Bound]) :-
    reverset(Xs, [X|Rs], Ys, Bound).


lastt([],[]).
lastt([X|Xs], [Last]) :-
		  lastt_(Xs, X, Last).

lastt_([], Last, Last).
lastt_([X|Xs], _, Last) :-
		  lastt_(Xs, X, Last).

onet([],[1]).
onet([_|_],[1]).

firstt([],[]).
firstt([X|_],[X]).

zerot([],[0]).
zerot([_|_],[0]).

emptyt([],[]).
emptyt([_|_],[]).

flipt([],[]).
flipt([0|X],[1|Y]) :- flipt(X,Y).
flipt([1|X],[0|Y]) :- flipt(X,Y).

secondt([],[]).
secondt([_],[]).
secondt([_,Y|_],[Y]).

firstzerot([0|_]).
firstonet([1|_]).



generate(A,B):-
  C = [[],[0],[1],[0,0],[0,1],[1,0],[1,1],[0,0,0],[0,0,1],[0,1,0],[0,1,1],[1,0,0],[1,0,1],[1,1,0],[1,1,1],[0,0,0,0],[0,0,0,1],[0,0,1,0],[0,0,1,1],[0,1,0,0],[0,1,0,1],[0,1,1,0],[0,1,1,1],[1,0,0,0],[1,0,0,1],[1,0,1,0],[1,0,1,1],[1,1,0,0],[1,1,0,1],[1,1,1,0],[1,1,1,1],[0,0,0,0,0],[0,0,0,0,1],[0,0,0,1,0],[0,0,0,1,1],[0,0,1,0,0],[0,0,1,0,1],[0,0,1,1,0],[0,0,1,1,1],[0,1,0,0,0],[0,1,0,0,1],[0,1,0,1,0],[0,1,0,1,1],[0,1,1,0,0],[0,1,1,0,1],[0,1,1,1,0],[0,1,1,1,1],[1,0,0,0,0],[1,0,0,0,1],[1,0,0,1,0],[1,0,0,1,1],[1,0,1,0,0],[1,0,1,0,1],[1,0,1,1,0],[1,0,1,1,1],[1,1,0,0,0],[1,1,0,0,1],[1,1,0,1,0],[1,1,0,1,1],[1,1,1,0,0],[1,1,1,0,1],[1,1,1,1,0],[1,1,1,1,1],[0,0,0,0,0,0],[0,0,0,0,0,1],[0,0,0,0,1,0],[0,0,0,0,1,1],[0,0,0,1,0,0],[0,0,0,1,0,1],[0,0,0,1,1,0],[0,0,0,1,1,1],[0,0,1,0,0,0],[0,0,1,0,0,1],[0,0,1,0,1,0],[0,0,1,0,1,1],[0,0,1,1,0,0],[0,0,1,1,0,1],[0,0,1,1,1,0],[0,0,1,1,1,1],[0,1,0,0,0,0],[0,1,0,0,0,1],[0,1,0,0,1,0],[0,1,0,0,1,1],[0,1,0,1,0,0],[0,1,0,1,0,1],[0,1,0,1,1,0],[0,1,0,1,1,1],[0,1,1,0,0,0],[0,1,1,0,0,1],[0,1,1,0,1,0],[0,1,1,0,1,1],[0,1,1,1,0,0],[0,1,1,1,0,1],[0,1,1,1,1,0],[0,1,1,1,1,1],[1,0,0,0,0,0],[1,0,0,0,0,1],[1,0,0,0,1,0],[1,0,0,0,1,1],[1,0,0,1,0,0],[1,0,0,1,0,1],[1,0,0,1,1,0],[1,0,0,1,1,1],[1,0,1,0,0,0],[1,0,1,0,0,1],[1,0,1,0,1,0],[1,0,1,0,1,1],[1,0,1,1,0,0],[1,0,1,1,0,1],[1,0,1,1,1,0],[1,0,1,1,1,1],[1,1,0,0,0,0],[1,1,0,0,0,1],[1,1,0,0,1,0],[1,1,0,0,1,1],[1,1,0,1,0,0],[1,1,0,1,0,1],[1,1,0,1,1,0],[1,1,0,1,1,1],[1,1,1,0,0,0],[1,1,1,0,0,1],[1,1,1,0,1,0],[1,1,1,0,1,1],[1,1,1,1,0,0],[1,1,1,1,0,1],[1,1,1,1,1,0],[1,1,1,1,1,1]],
  del(A,C,B).

del(X,[X|L],L).
del(X,[Y|L],[Y|L1]):-
  del(X,L,L1).
